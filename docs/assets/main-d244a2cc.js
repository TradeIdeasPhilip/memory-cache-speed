(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var o={};Object.defineProperty(o,"__esModule",{value:!0});o.permutations=o.polarToRectangular=o.makeBoundedLinear=o.makeLinear=o.sum=o.countMap=R=o.initializedArray=o.count=o.zip=o.FIGURE_SPACE=o.NON_BREAKING_SPACE=o.dateIsValid=o.MIN_DATE=o.MAX_DATE=_=o.makePromise=o.filterMap=o.pick=o.pickAny=o.csvStringToArray=o.parseTimeT=o.parseIntX=o.parseFloatX=o.getAttribute=o.followPath=o.parseXml=o.testXml=o.sleep=M=o.assertClass=void 0;function V(e,t,n="Assertion Failed."){const r=s=>{throw new Error(`${n}  Expected type:  ${t.name}.  Found type:  ${s}.`)};if(e===null)r("null");else if(typeof e!="object")r(typeof e);else if(!(e instanceof t))r(e.constructor.name);else return e;throw new Error("wtf")}var M=o.assertClass=V;function q(e){return new Promise(t=>setTimeout(t,e))}o.sleep=q;function B(e){const n=new DOMParser().parseFromString(e,"application/xml");for(const r of Array.from(n.querySelectorAll("parsererror")))if(r instanceof HTMLElement)return{error:r};return{parsed:n}}o.testXml=B;function K(e){if(e!==void 0)return B(e)?.parsed?.documentElement}o.parseXml=K;function N(e,...t){for(const n of t){if(e===void 0)return;if(typeof n=="number")e=e.children[n];else{const r=e.getElementsByTagName(n);if(r.length!=1)return;e=r[0]}}return e}o.followPath=N;function W(e,t,...n){if(t=N(t,...n),t!==void 0&&t.hasAttribute(e))return t.getAttribute(e)??void 0}o.getAttribute=W;function H(e){if(e==null)return;const t=parseFloat(e);if(isFinite(t))return t}o.parseFloatX=H;function F(e){const t=H(e);if(t!==void 0)return t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER||t!=Math.floor(t)?void 0:t}o.parseIntX=F;function Y(e){if(typeof e=="string"&&(e=F(e)),e!=null&&!(e<=0))return new Date(e*1e3)}o.parseTimeT=Y;const J=e=>{const t=/(,|\r?\n|\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^,\r\n]*))/gi,n=[[]];let r;for(;r=t.exec(e);)r[1].length&&r[1]!==","&&n.push([]),n[n.length-1].push(r[2]!==void 0?r[2].replace(/""/g,'"'):r[3]);return n};o.csvStringToArray=J;function Q(e){const t=e.values().next();if(!t.done)return t.value}o.pickAny=Q;function Z(e){return e[Math.random()*e.length|0]}o.pick=Z;function ee(e,t){const n=[];return e.forEach((r,s)=>{const i=t(r,s);i!==void 0&&n.push(i)}),n}o.filterMap=ee;function te(){let e,t;return{promise:new Promise((r,s)=>{e=r,t=s}),resolve:e,reject:t}}var _=o.makePromise=te;o.MAX_DATE=new Date(864e13);o.MIN_DATE=new Date(-864e13);function ne(e){return isFinite(e.getTime())}o.dateIsValid=ne;o.NON_BREAKING_SPACE=" ";o.FIGURE_SPACE=" ";function*re(...e){const t=e.map(n=>n[Symbol.iterator]());for(;;){const n=t.map(r=>r.next());if(n.some(({done:r})=>r))break;yield n.map(({value:r})=>r)}}o.zip=re;function*oe(e=0,t=1/0,n=1){for(let r=e;r<t;r+=n)yield r}o.count=oe;function P(e,t){const n=[];for(let r=0;r<e;r++)n.push(t(r));return n}var R=o.initializedArray=P;o.countMap=P;function se(e){return e.reduce((t,n)=>t+n,0)}o.sum=se;function ie(e,t,n,r){const s=(r-t)/(n-e);return function(i){return(i-e)*s+t}}o.makeLinear=ie;function ae(e,t,n,r){n<e&&([e,t,n,r]=[n,r,e,t]);const s=(r-t)/(n-e);return function(i){return i<=e?t:i>=n?r:(i-e)*s+t}}o.makeBoundedLinear=ae;function le(e,t){return{x:Math.sin(t)*e,y:Math.cos(t)*e}}o.polarToRectangular=le;function*O(e,t=[]){if(e.length==0)yield t;else for(let n=0;n<e.length;n++){const r=e[n],s=[...t,r],i=[...e.slice(0,n),...e.slice(n+1)];yield*O(i,s)}}o.permutations=O;var l={};Object.defineProperty(l,"__esModule",{value:!0});l.download=l.createElementFromHTML=l.getHashInfo=l.getAudioBalanceControl=l.getBlobFromCanvas=l.loadDateTimeLocal=c=l.getById=void 0;const x=o;function ce(e,t){const n=document.getElementById(e);if(!n)throw new Error("Could not find element with id "+e+".  Expected type:  "+t.name);if(n instanceof t)return n;throw new Error("Element with id "+e+" has type "+n.constructor.name+".  Expected type:  "+t.name)}var c=l.getById=ce;function ue(e,t,n="milliseconds"){let r;switch(n){case"minutes":{r=t.getSeconds()*1e3+t.getMilliseconds();break}case"seconds":{r=t.getMilliseconds();break}case"milliseconds":{r=0;break}default:throw new Error("wtf")}e.valueAsNumber=+t-t.getTimezoneOffset()*6e4-r}l.loadDateTimeLocal=ue;function de(e){const{reject:t,resolve:n,promise:r}=(0,x.makePromise)();return e.toBlob(s=>{s?n(s):t(new Error("blob is null!"))}),r}l.getBlobFromCanvas=de;function fe(e){const t=new AudioContext,n=t.createMediaElementSource(e),r=new StereoPannerNode(t,{pan:0});return n.connect(r).connect(t.destination),s=>{r.pan.value=s}}l.getAudioBalanceControl=fe;function me(){const e=new Map;return/^#?(.*)$/.exec(location.hash.replace("+","%20"))[1].split("&").forEach(r=>{const s=r.split("=",2);if(s.length==2){const i=decodeURIComponent(s[0]),a=decodeURIComponent(s[1]);e.set(i,a)}}),e}l.getHashInfo=me;function pe(e,t){var n=document.createElement("div");return n.innerHTML=e.trim(),(0,x.assertClass)(n.firstChild,t,"createElementFromHTML:")}l.createElementFromHTML=pe;function he(e,t){var n=document.createElement("a");if(n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),document.createEvent){var r=document.createEvent("MouseEvents");r.initEvent("click",!0,!0),n.dispatchEvent(r)}else n.click()}l.download=he;function Ee(e){const t=e;try{switch(t.type){case"error":return typeof t.message=="string";case"success":return typeof t.timeInMS=="number";default:return!1}}catch{return!1}}class C{constructor(){throw new Error("wtf")}static#e=Symbol("Namer description");static#t=0;static add(t,n){if(this.#e in t)throw new Error("wtf — duplicate object name");if(typeof n!="string"&&(n=n[this.#e]),typeof n!="string")throw new Error("wtf");t[this.#e]=n;const r=`#${this.#t} ${n}`;this.#t++,t.toString=()=>r}}function D(e){const t=new Uint32Array(e),n=R(e-1,i=>i+1);let r=0;for(;n.length>0;){const i=Math.random()*n.length|0;t[r]=n[i],n[i]=n[n.length-1],n.pop(),r=t[r]}t[r]=0;const s=`Random ${e.toLocaleString()}`;return C.add(t,s),t}function U(e,t){const n=new Uint32Array(e);let r=0;for(let i=0;i<t;i++)for(let a=i;a<e;a+=t)n[r]=a,r=a;n[r]=0;const s=`Interleaved ${e.toLocaleString()} ⋰ ${t.toLocaleString()}`;return C.add(n,s),n}function X(e){const t=new Uint32Array(e);return C.add(t,e),t}window.createRandom=D;window.createInterleaved=U;window.copyMemory=X;const f=c("list",HTMLSelectElement),ge=c("bytes",HTMLSpanElement),j=c("copy",HTMLButtonElement),$=c("release",HTMLButtonElement),L=c("test",HTMLButtonElement),p=c("repetitionCount",HTMLInputElement),d=c("itemCount",HTMLInputElement),I=c("randomData",HTMLButtonElement),z=c("inOrder",HTMLButtonElement),w=c("partitionCount",HTMLInputElement),A=c("header",HTMLTableRowElement),we=c("row",HTMLTemplateElement).content.querySelector("tr");function ye(e){const t=+e;if(!isFinite(t))return;const n=Number.parseInt(e);if(isFinite(n)&&t==n)return n}function h(e){const t=ye(e);if(!(t===void 0||t<=0))return t}function b(e){return h(e)!==void 0}function E(){const e=[...f.selectedOptions],n=!(e.length>0);j.disabled=n,$.disabled=n,b(p.value)?(p.style.backgroundColor="",L.disabled=n):(p.style.backgroundColor="pink",L.disabled=!0);const r=b(d.value);r?(d.style.backgroundColor="",I.disabled=!1):(d.style.backgroundColor="pink",I.disabled=!0);const s=b(w.value);w.style.backgroundColor=s?"":"pink",z.disabled=!(r&&s);let i=0;e.forEach(a=>{const g=y(a);i+=g.length*g.BYTES_PER_ELEMENT}),ge.innerText=i.toLocaleString()}window.updateGUI=E;[p,w,d,f].forEach(e=>e.addEventListener("input",E));E();const G=Symbol("memory");function ve(e,t){e[G]=t}function y(e){const t=e[G];if(t instanceof Uint32Array)return t;throw new Error("wtf")}function S(e){const t=document.createElement("option");return t.selected=!0,t.innerText=e.toString(),ve(t,e),f.appendChild(t),E(),t}I.addEventListener("click",()=>{const e=h(d.value);if(e===void 0)throw new Error("wtf");const t=D(e);S(t)});z.addEventListener("click",()=>{const e=h(d.value);if(e===void 0)throw new Error("wtf");const t=h(w.value);if(t===void 0)throw new Error("wtf");const n=U(e,t);S(n)});j.addEventListener("click",()=>{[...f.selectedOptions].forEach(t=>S(X(y(t))))});$.addEventListener("click",()=>{[...f.selectedOptions].forEach(t=>t.remove()),E()});const k=new Intl.NumberFormat("en-US",{maximumSignificantDigits:6});L.addEventListener("click",async()=>{const e=[...f.selectedOptions],t=h(p.value);if(t===void 0)throw new Error("wtf — The button should have been disabled.");const n=M(we.cloneNode(!0),HTMLTableRowElement),[r,s,i,a,g]=n.children;if(!(r instanceof HTMLTableCellElement&&s instanceof HTMLTableCellElement&&i instanceof HTMLTableCellElement&&a instanceof HTMLTableCellElement))throw new Error("wtf");A.parentElement.insertBefore(n,A.nextElementSibling);var v=new Date;r.innerText=(v.getHours()+11)%12+1+":"+v.getMinutes().toString().padStart(2,"0")+":"+v.getSeconds().toString().padStart(2,"0"),e.forEach((m,T)=>{T>0&&s.append(", ");const u=document.createElement("span");u.classList.add("memoryName"),u.innerText=y(m).toString(),s.appendChild(u),i.innerText=t.toLocaleString()});try{const{promise:m,cancel:T}=Te(e.map(y),t);M(g.firstElementChild,HTMLButtonElement).addEventListener("click",()=>{T(),n.remove()});const u=await m;a.innerText=`${k.format(u*1e3)}µs total, ${k.format(u*1e3/t)}µs / repetition`,a.dataset.status="complete"}catch(m){a.innerText=m+"",a.dataset.status="error"}});function Te(e,t){const n=new Worker(new URL(""+new URL("worker-617aed1d.js",import.meta.url).href,self.location),{type:"module"}),r={type:"testMemory",memory:e,repetitionCount:t},s=_();return n.addEventListener("message",i=>{const a=i.data;Ee(a)?a.type=="success"?s.resolve(a.timeInMS):s.reject(a.message):(console.error(s,"message"),s.reject(new Error("Unexpected response from thread.")))}),n.addEventListener("error",i=>{console.error(i,"error"),s.reject("error")}),n.addEventListener("messageerror",i=>{console.error(i,"messageerror"),s.reject("messageerror")}),n.postMessage(r),{promise:s.promise,cancel(i="cancelled"){s.reject(i),n.terminate()}}}
